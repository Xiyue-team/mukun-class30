<!DOCTYPE html>
<!-- saved from url=(0016)http://localhost -->
<html>
	<head>
		<meta charset="UTF-8">
		<title>登录</title>
		<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
		<meta name="apple-mobile-web-app-status-bar-style" content="black" />
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="viewport" content="minimum-scale=1.0, maximum-scale=1.0, initial-scale=1.0, width=device-width, user-scalable=no">
		<link rel="stylesheet" type="text/css" href="css/login.css" />
		<link rel="stylesheet" type="text/css" href="css/common.css" />
	</head>
	<body class="loading">
		<div class="background">
			<!--标题栏-->
			<div class="title-bar">
				<div id="step1_back" class="title-bar-btns" style="display: none;">
					<img id="back-btn" src="img/back@2x.png" alt="" style="position: absolute;top: 0;left: 0;width: 44px;height: 44px;" onclick="backToLogin()">
				</div>
				<div id="close_login" class="title-bar-btns">
					<img id="close-btn" src="img/close_44@2x.png" alt="" style="top: 0;width: 11%;max-width: 100%;float: right" onclick="closeForm()">
				</div>
			</div>
			<!--登录begin -->
			<div id="login_container" style="height: 88%;">
				<!--logo-->
				<div id="logo1" class="login_logo">
					<img draggable="false" src="img/logo@2x.png" alt="" style="width: 30%;">
				</div>

				<!--登录-->
				<div id="login" class="form">
					<form id="loginForm" style="height: 100%;"  action="http://demo.xckj.net:8380/xcoffice/login" method="post"  target="_blank"  onsubmit="return validate();">
						<div class="form-group" id="username-div">
							<input class="form-control large_input" name="useraccount" id="useraccount"  maxlength="18" type="text" value="" placeholder="请输入用户名"/> 
						</div>
						<div class="form-group" style="margin-top: 4%" id="pass_div">
							<input class="form-control large_input" name="userpassword" id="userpassword" value=""  type="password"  placeholder="请输入密码"/>
						</div>
						<div id="loginCodeFormGroup" class="form-group" style="display: none; margin-top: 16px;">
							<input class="form-control code_input" id="loginCode" type="text" value="" maxlength="4" placeholder="请输入验证码"/>
						</div>
						<!--错误提示-->
						<div id="loginError" class="error"></div>

						<input type="button" value="登录" id="submit_input" class="button large_btn" style="display: inline-block;"  onclick="login()"/>
						<div class="link" style="display: inline-block">
							<span id="register_acount" style="float: left"  >
								<img id="unselect" src="img/selected@2x.png" onclick="remember(1)">								
								<img id="selected" src="img/unselect@2x.png" onclick="remember(2)">
								<span>记住密码</span>
							</span> 
						</div>
						<!--<div class="link" style="display: inline-block">
							<span id="register_acount" style="float: left"  onclick="register()">注册账户</span>
							<span id="forget_password" style="float: right" onclick="forgetPassWord()">修改密码</span>
						</div>-->
					</form>
				</div>

				<!--其他登录方式-->
<!--				<div class="otherWay">-->
<!--					<div class="loginImg"><img src="img/QQ@2x.png"></div>-->
<!--					<div class="loginImg"><img src="img/wechat@2x.png"></div>-->
<!--					<div class="loginImg"><img src="img/weibo@2x.png"></div>-->
<!--				</div>-->
			</div>
			<!--登录end -->

			<!--激活begin-->
			<div id="active_container" style="-webkit-app-region: no-drag;display: none;">
				<div id="" class="form ">
					<div id="code_tip" class="active_label">激活账号</div>
					<form id="forgetPwdForm">
						<div class="form-group" style="margin-bottom: 16px;">
							<input class="form-control large_input" id="username1" type="text" value="" maxlength="13" placeholder="请输入手机号码"/>
						</div>
						<div class="form-group" style="display: flex;justify-content: center;">
							<div style="width: 300px;box-shadow: inset 0 -1px 0 0 #EBEBEB;display: flex;">
								<input class="form-control  code_input" id="msgcode" type="text" value="" maxlength="4"  placeholder="请输入验证码"/>
								<span class="get-code" id="forgetPwdGetCode">获取验证码</span>
							</div>
						</div>
						<div id="codeError" class="error"></div>
						<input type="button" value="绑定并登录" id="bind_complete"  class="button bind_btn"/>
					</form>
				</div>
			</div>
			<!--激活end -->

			<!-- 设置密码 begin -->
			<div id="resetPwdFormDiv" class="form resetPwdFormDiv" style="display: none;">
				<div id="resetLabel" class="active_label">设置密码</div>
				<form id="resetPwdForm">
					<div class="form-group" style="margin-bottom: 16px;">
						<input class="form-control large_input" id="password1" type="password" value="" placeholder="请输入密码(6-16位字符)"/>
					</div>
					<div class="form-group">
						<input class="form-control large_input" id="password1_c" type="password" value=""  placeholder="请再次输入密码"/>
					</div>
					<div id="passwordError" class="error"></div>
					<input type="button" value="完成" id="step2_next"  class="button password_btn"/>
				</form>
			</div>
			<!-- 设置密码 end -->
		</div>

	</body>
	<script type="text/javascript" src="../assets/js/jquery-3.5.1.js"></script>
	<script src="../login/js/jquery.cookie.js" type="text/javascript"></script>
	<script type="text/javascript" >

        //禁止右键菜单
        document.oncontextmenu = function(){return false;}
        zoomDisabled();

        // 禁止页面缩放
		function zoomDisabled() {
            $(document).keydown(function (event) {
                //event.metaKey mac的command键
                if ((event.ctrlKey === true || event.metaKey === true)&& (event.which === 61 || event.which === 107 || event.which === 173 || event.which === 109 || event.which === 187  || event.which === 189)){
                    event.preventDefault();
                }
            });
            $(window).bind('mousewheel DOMMouseScroll', function (event) {
                if (event.ctrlKey === true || event.metaKey) {
                    event.preventDefault();
                }
            });
		}


        // 调用登录接口
        function login() {
			if(validate()){
				$("#loginError").html("");
				save_cookies();
				$("#loginForm").submit();
				closeForm();
			}
        }

        // 关闭登录窗口
		function closeForm() {
			window.parent.closeLogin();
		}

		// 记住密码
		function remember (type) {
			if (type == 1) {
			$('#unselect').css('display','none');
			$('#selected').css('display','inherit');
			} else {
				$('#selected').css('display','none');
			$('#unselect').css('display','inherit');
			}
			};
		//注册
		function register() {
			$('#login_container').css('display','none');
			$('#active_container').css('display','inherit');
			$('#step1_back').css('display','inherit');
        }


        //忘记密码
		function forgetPassWord() {
			$('#login_container').css('display','none');
			$('#resetPwdFormDiv').css('display','inherit');
			$('#step1_back').css('display','inherit');
        }

        // 返回
		function backToLogin() {
			$('#login_container').css('display','inherit');
			$('#active_container').css('display','none');
			$('#resetPwdFormDiv').css('display','none');
			$('#step1_back').css('display','none');
		}

		function showCloseButton() {
			$('#close_login').css('display', 'inherit');
			$('#logo1').css('display', 'inherit');
		}

		function hideCloseButton() {
			$('#close_login').css('display', 'none');
			$('#logo1').css('display', 'none');
		}


		function  validate(){
			var result=true; 
			var  name= $("#useraccount").val(); 
			var  password=$("#userpassword").val();  
			if(name==null||name==""){
				result=false;
				$("#loginError").html("用户名不能为空");
				return  result;
			}
			
			if(password==null||password==""){
				result=false;
				$("#loginError").html("密码不能为空");
			} 
			return  result;
		}


	 


		function save_cookies(){
			if($("#rember").prop("checked")){
				var username = $("#useraccount").val();
				var password = $("#userpassword").val(); 
				$.cookie("remember","true",{expires:7});
				$.cookie("username",username,{expires:7 });
				$.cookie("password",password,{expires:7 });
			}else{
				$.cookie("remember","false",{expires:-1});
				$.cookie("username","",{ expires:-1 });
				$.cookie("password","",{ expires:-1 });
			}
		};


		 $(document).ready(function(){
            var rem = $.cookie('remember');
            if(rem){
                $("#rember").prop("checked",true);
                $("#useraccount").val($.cookie("username"));
                $("#userpassword").val($.cookie("password"));
            }else{
				$("#rember").prop("checked",false);
                $("#useraccount").val("yanshi001");
                $("#userpassword").val("mukun2020");
			}
        });


		$("#userpassword").keydown(function(e) {  
			   if (e.keyCode == 13) {  
					 login();
			   }  
		}); 
		

		$("#useraccount").keydown(function(e) {  
			   if (e.keyCode == 13) {  
					 login();
			   }  
		});

	</script>
</html>
